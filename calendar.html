<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <title>Chat</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <style type="text/css">
    html,
    body {
    background: #efefef;
    padding: 10px;
    font-family: 'Varela Round';
    }
    .conversation-wrap
    {
        box-shadow: -2px 0 3px #ddd;
        padding:0;
        max-height: 400px;
        overflow: auto;
    }
    .conversation
    {
        padding:5px;
        border-bottom:1px solid #ddd;
        margin:0;   

    }

    .intro-screen-wrap
    {
        box-shadow: 0 0 3px #ddd;
        height: 400px;
        padding:0;

    }

    .message-wrap
    {
        box-shadow: 0 0 3px #ddd;
        padding:0;

    }
    .msg
    {
        padding:5px;
        /*border-bottom:1px solid #ddd;*/
        margin:0;
    }
    .msg-wrap
    {
        padding:10px;
        height: 352px;
        overflow: auto;

    }

    .time
    {
        color:#bfbfbf;
    }

    .send-wrap
    {
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
        padding:10px;
        /*background: #f8f8f8;*/
    }

    .send-message
    {
        resize: none;
    }

    .highlight
    {
        background-color: #f7f7f9;
        border: 1px solid #e1e1e8;
    }

    .send-message-btn
    {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
        border-bottom-left-radius: 0;

        border-bottom-right-radius: 0;
    }
    .btn-panel
    {
        background: #f7f7f9;
    }

    .btn-panel .btn
    {
        color:#b8b8b8;

        transition: 0.2s all ease-in-out;
    }

    .btn-panel .btn:hover
    {
        color:#666;
        background: #f8f8f8;
    }
    .btn-panel .btn:active
    {
        background: #f8f8f8;
        box-shadow: 0 0 1px #ddd;
    }

    .btn-panel-conversation .btn,.btn-panel-msg .btn
    {

        background: #f8f8f8;
    }
    .btn-panel-conversation .btn:first-child
    {
        border-right: 1px solid #ddd;
    }

    .msg-wrap .media-heading
    {
        color:#003bb3;
        font-weight: 700;
    }


    .msg-date
    {
        background: none;
        text-align: center;
        color:#aaa;
        border:none;
        box-shadow: none;
        border-bottom: 1px solid #ddd;
    }


    body::-webkit-scrollbar {
        width: 12px;
    }
 
    
    /* Let's get this party started */
    ::-webkit-scrollbar {
        width: 6px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
/*        -webkit-border-radius: 10px;
        border-radius: 10px;*/
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
/*        -webkit-border-radius: 10px;
        border-radius: 10px;*/
        background:#ddd; 
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
    }
    ::-webkit-scrollbar-thumb:window-inactive {
        background: #ddd; 
    }

    </style>
    <style>
    html,
    body {
    background: #efefef;
    padding: 10px;
    font-family: 'Varela Round';
    }
    /*=== 2. Anchor Link ===*/
    a {
    color: #aaaaaa;
    transition: all ease-in-out 200ms;
    }
    a:hover {
    color: #333333;
    text-decoration: none;
    }
    /*=== 3. Text Outside the Box ===*/
    .etc-login-form {
    color: #919191;
    padding: 10px 20px;
    }
    .etc-login-form p {
    margin-bottom: 5px;
    }
    /*=== 4. Main Form ===*/
    .login-form-1 {
    width: 700px;
    border-radius: 5px;
    display: inline-block;
    }
    .main-login-form {
    position: relative;
    }
    .login-form-1 .form-control {
    border: 0;
    box-shadow: 0 0 0;
    border-radius: 0;
    background: transparent;
    color: #555555;
    padding: 7px 0;
    font-weight: bold;
    height:auto;
    }
    .login-form-1 .form-control::-webkit-input-placeholder {
    color: #999999;
    }
    .login-form-1 .form-control:-moz-placeholder,
    .login-form-1 .form-control::-moz-placeholder,
    .login-form-1 .form-control:-ms-input-placeholder {
    color: #999999;
    }
    .login-form-1 .form-group {
    margin-bottom: 0;
    border-bottom: 2px solid #efefef;
    padding-right: 20px;
    position: relative;
    }
    .login-form-1 .form-group:last-child {
    border-bottom: 0;
    }
    .login-group {
    background: #ffffff;
    color: #999999;
    border-radius: 8px;
    padding: 10px 20px;
    }
    .login-group-checkbox {
    padding: 5px 0;
    }
    /*=== 5. Login Button ===*/
    .login-form-1 .login-button {
    position: absolute;
    right: -25px;
    top: 50%;
    background: #ffffff;
    color: #999999;
    padding: 11px 0;
    width: 50px;
    height: 50px;
    margin-top: -25px;
    border: 5px solid #efefef;
    border-radius: 50%;
    transition: all ease-in-out 500ms;
    }
    .login-form-1 .login-button:hover {
    color: #555555;
    transform: rotate(450deg);
    }
    .login-form-1 .login-button.clicked {
    color: #555555;
    }
    .login-form-1 .login-button.clicked:hover {
    transform: none;
    }
    .login-form-1 .login-button.clicked.success {
    color: #2ecc71;
    }
    .login-form-1 .login-button.clicked.error {
    color: #e74c3c;
    }
    /*=== 6. Form Invalid ===*/
    label.form-invalid {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 5;
    display: block;
    margin-top: -25px;
    padding: 7px 9px;
    background: #777777;
    color: #ffffff;
    border-radius: 5px;
    font-weight: bold;
    font-size: 11px;
    }
    label.form-invalid:after {
    top: 100%;
    right: 10px;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
    border-color: transparent;
    border-top-color: #777777;
    border-width: 6px;
    }
    /*=== 7. Form - Main Message ===*/
    .login-form-main-message {
    background: #ffffff;
    color: #999999;
    border-left: 3px solid transparent;
    border-radius: 3px;
    margin-bottom: 8px;
    font-weight: bold;
    height: 0;
    padding: 0 20px 0 17px;
    opacity: 0;
    transition: all ease-in-out 200ms;
    }
    .login-form-main-message.show {
    height: auto;
    opacity: 1;
    padding: 10px 20px 10px 17px;
    }
    .login-form-main-message.success {
    border-left-color: #2ecc71;
    }
    .login-form-main-message.error {
    border-left-color: #e74c3c;
    }
    /* hover style just for information */
    label:hover:before {
    border: 1px solid #f6f6f6 !important;
    }
    /*=== 9. Misc ===*/
    .logo {
    padding: 15px 0;
    font-size: 25px;
    color: #aaaaaa;
    font-weight: bold;
    }
</style>
    <script src="bootstrap.min.js"></script>
    <script type="text/javascript" src="jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="handlebars-v4.0.10.js"></script>
    <script>
$(function  () {
	$.getJSON(window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + '/getEventListJSON', function(data) {
		var theTemplateScript = $("#eventlist-template").html();
		var theTemplate = Handlebars.compile (theTemplateScript);
		$(".conversation-wrap").append (theTemplate(data)); 
	});
    $.getJSON(window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + '/getHTMLStatus', function(data) {
		var theTemplateScript = $("#htmlstatus-template").html();
		var theTemplate = Handlebars.compile (theTemplateScript);
		$(".htmlstatus").append (theTemplate(data)); 
	});
});
     </script>
</head>
<body>
        <link href="css/font-awesome.css" rel="stylesheet">
<div class="container">
    <div class="row">
        <div class="col-lg-3">
            <div class="btn-panel btn-panel-conversation">
                <a href="home" class="btn  col-lg-6 send-message-btn " role="button"><i class="fa fa-comments"></i> Messaging</a>
                <a href="calendar" class="btn  col-lg-6  send-message-btn pull-right" role="button"><i class="fa fa-calendar"></i> Events</a>
            </div>
        </div>

        <div class="col-lg-offset-1 col-lg-7">
            <div class="btn-panel btn-panel-msg">
                <a href="logout" class="btn  col-lg-3  send-message-btn pull-right" role="button"><i class="fa fa-cog"></i> Log Out</a>
                <a href="editProfile" class="btn  col-lg-3  send-message-btn pull-right" role="button"><i class="fa fa-gears"></i> Edit Profile</a>
            </div>
        </div>
    </div>
    <div class="row">

        <div class="conversation-wrap col-lg-3">
            <ul class="peernav"></ul>
            <script id="eventlist-template" type="x-handlebars-template">
                {{#each this}}
                <div class="media conversation">
                    <a class="pull-left" href="event?sender='{{sender}}'&name='{{event_name}}'&start_time='{{start_time}}'">
                    <img class="media-object" data-src="holder.js/64x64" alt="eventpic" style="width: 50px; height: 50px;" src="{{event_picture}}"></a>
                    <div class="media-body">
                        <h5 class="media-heading">{{event_name}}</h5>
                        <small>{{event_location}} at {{time}}</small>
                    </div>
                </div>
                {{/each}}
	        </script>
        </div>
        
        <div class='intro-screen-wrap col-lg-8'>
            <div class="logo">Create a new Event:</div>
                <div class='login-form-1'>
                    <form accept-charset='UTF-8' action='/processEvent' id='processEvent'  class='text-left' method='post' enctype='multipart/form-data'>
                        <div class='login-form-main-message'></div>
                        <div class='main-login-form'>
                            <div class='login-group'>
                                <div class='form-group'>
                                    <label for='destinations' class='sr-only'>usernames of guests</label>
                                    <input type='text' class='form-control' id='destinations' name='destinations' placeholder='comma seperated usernames of guests'>
                                </div>
                                <div class='form-group'>
                                    <label for='event_name' class='sr-only'>name of event</label>
                                    <input type='text' class='form-control' id='event_name' name='event_name' placeholder='name of event'>
                                </div>
                                <div class='form-group'>
                                    <label for='start_time' class='sr-only'>event start time</label>
                                    <input type='datetime-local' class='form-control' id='start_time' name='start_time' placeholder='event start time'>
                                </div>
                                <div class='form-group'>
                                    <label for='end_time' class='sr-only'>event end time</label>
                                    <input type='datetime-local' class='form-control' id='end_time' name='end_time' placeholder='event end time'>
                                </div>
                                <div class='form-group'>
                                    <label for='event_description' class='sr-only'>event description</label>
                                    <input type='textarea' class='form-control' id='event_description' name='event_description' placeholder='event description'>
                                </div>
                                <div class='form-group'>
                                    <label for='event_location' class='sr-only'>event location</label>
                                    <input type='text' class='form-control' id='event_location' name='event_location' placeholder='event location'>
                                </div>
                                <div class='form-group'>
                                    <label for='event_picture' class='sr-only'>event picture url</label>
                                    <input type='text' class='form-control' id='event_picture' name='event_picture' placeholder='event picture url'>
                                </div>
                            </div>
                            <button type="submit" class="login-button"><i class="fa fa-chevron-right"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    
    </div>
    </br>
    <div class='htmlstatus'>
        <script id="htmlstatus-template" type="x-handlebars-template">
            <form action='/updateStatus' id='usrstatus' method='post' enctype='multipart/form-data'>
                <select name='newStatus' onchange='if(this.value != 0) { this.form.submit(); }'>
                    {{#if a}}
                    <option selected value='Online'>Online</option>
                    {{else}}
                    <option value='Online'>Online</option>
                    {{/if}}
                    {{#if b}}
                    <option selected value='Idle'>Idle</option>
                    {{else}}
                    <option value='Idle'>Idle</option>
                    {{/if}}
                    {{#if c}}
                    <option selected value='Do Not Disturb'>Do Not Disturb</option>
                    {{else}}
                    <option value='Do Not Disturb'>Do Not Disturb</option>
                    {{/if}}
                    {{#if d}}
                    <option selected value='Away'>Away</option>
                    {{else}}
                    <option value='Away'>Away</option>
                    {{/if}}
                    {{#if e}}
                    <option selected value='Offline'>Offline</option>
                    {{else}}
                    <option value='Offline'>Offline</option>
                    {{/if}}
                </select>
            </form>
        </script>
    </div>
</div>
<link rel='stylesheet' href='simplemde.min.css'>
<script src='simplemde.min.js'></script>
<script>new SimpleMDE({ element: document.getElementById('event_description'), spellChecker: false, });</script>
</body>
</html>